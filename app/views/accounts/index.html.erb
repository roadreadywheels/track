<% case @date %>
    <% when 'January' %>
      <% @stocks.each do |stock| %>
        <% (@sum += stock.january_income) %>
      <% end %>
      <% when 'February' %>
      <% @stocks.each do |stock| %>
        <% @sum += stock.february_income %>
      <% end %>
      <% when 'March' %>
      <% @stocks.each do |stock| %>
        <% @sum += stock.march_income %>
      <% end %>
      <% when 'April' %>
      <% @stocks.each do |stock| %>
        <% @sum += stock.april_income %>
      <% end %>
      <% when 'May' %>
      <% @stocks.each do |stock| %>
        <% @sum += stock.may_income %>
      <% end %>
      <% when 'June' %>
      <% @stocks.each do |stock| %>
        <% @sum += stock.june_income %>
      <% end %>
      <% when 'July' %>
      <% @stocks.each do |stock| %>
        <% @sum += stock.july_income %>
      <% end %>
      <% when 'August' %>
      <% @stocks.each do |stock| %>
        <% @sum += stock.august_income %>
      <% end %>
      <% when 'September' %>
      <% @stocks.each do |stock| %>
        <% @sum += stock.septermber_income %>
      <% end %>
      <% when 'October' %>
      <% @stocks.each do |stock| %>
        <% @sum += stock.october_income %>
      <% end %>
      <% when 'November' %>
      <% @stocks.each do |stock| %>
        <% @sum += stock.november_income %>
      <% end %>
      <% when 'December' %>
      <% @stocks.each do |stock| %>
        <% @sum += stock.december_income %>
      <% end %>
    <% end %>

<div class="container">
  <div>
    <h3>Accounts</h3>
    <p class="account-text">Below lists all of your accounts, click on an account to view details on that account specifically. The section below this list will outline what your projected income is for that specific account. Also feel free to click on the account name and that is another way to determine what stocks are producing that income.</p>
  </div>
  <div>
    <table class="table table-striped table-bordered">
      <tr style="border: 1px solid black;">
        <th>Totals</th>
        <td><%= @date == 'January'   ? number_to_currency(@sum)  : link_to('Jan') %></td>
        <td><%= @date == 'February'  ? number_to_currency(@sum)  : link_to('Feb') %></td>
        <td><%= @date == 'March'     ? number_to_currency(@sum)  : link_to('Mar') %></td>
        <td><%= @date == 'April'     ? number_to_currency(@sum)  : link_to('Apr') %></td>
        <td><%= @date == 'May'       ? number_to_currency(@sum)  : link_to('May') %></td>
        <td><%= @date == 'June'      ? number_to_currency(@sum)  : link_to('Jun') %></td>
        <td><%= @date == 'July'      ? number_to_currency(@sum)  : link_to('Jul') %></td>
        <td><%= @date == 'August'    ? number_to_currency(@sum)  : link_to('Aug') %></td>
        <td><%= @date == 'September' ? number_to_currency(@sum)  : link_to('Sep') %></td>
        <td><%= @date == 'October'   ? number_to_currency(@sum)  : link_to('Oct') %></td>
        <td><%= @date == 'November'  ? number_to_currency(@sum)  : link_to('Nov') %></td>
        <td><%= @date == 'December'  ? number_to_currency(@sum)  : link_to('Dec') %></td>
      </tr>
    </table>
  </div>
</div>

<div class="container">
  <% @accounts.each do |account| %>
   <button class="btn-info" style="margin-bottom: 20px;padding: 5px;border-radius: 6px;">
      <%= link_to account.account_name, account_path(account), {:class => "account_links"} %>
    </button>
  <% end %>
</div>

<div class="container">
  <div class="month-section">
    <h3><%= @date %></h3>

    <p>Expected Income: <span style="color: green;"><%= number_to_currency(@sum, :precision => 2) %></span></p>
  </div>

  <% @accounts.each do |account| %>
    <button class="btn-info" style="margin-bottom: 20px;padding: 5px;border-radius: 6px;">
      <%= account.account_name %>: 
        <%= number_to_currency(account.send(@m)) %>
    </button>
  <% end %>

  <div>
  <table class="table table-striped">
    <thead>
    <tr>
      <th>Ticker</th>
      <th>Shares</th>
      <th>Account</th>
      <th>Ex-Date</th>
      <th>Pay Date</th>
      <th>Expected Income</th>
    </tr>
  </thead>
  <tbody>
    <% @stocks.each do |stock| %>
    <tr>
    <% case @date %>
    <% when 'January' %>
      <% if stock.january_income > 0 %>
        <td><%= stock.ticker %></td>
        <td><%= stock.shares %></td>
        <td><%= stock.account.account_name %></td>
        <td><%= stock.ex_date %></td>
        <td></td>
        <td><%= number_to_currency(stock.january_income, :precision => 2) %></td>
      <% end %>
      <% when 'February' %>
      <% if stock.february_income > 0 %>
        <td><%= stock.ticker %></td>
        <td><%= stock.shares %></td>
        <td><%= stock.account.account_name %></td>
        <td><%= stock.ex_date %></td>
        <td></td>
        <td><%= number_to_currency(stock.february_income, :precision => 2) %></td>
      <% end %>
      <% when 'March' %>
      <% if stock.march_income > 0 %>
        <td><%= stock.ticker %></td>
        <td><%= stock.shares %></td>
        <td><%= stock.account.account_name %></td>
        <td><%= stock.ex_date %></td>
        <td></td>
        <td><%= number_to_currency(stock.march_income, :precision => 2) %></td>
      <% end %>
      <% when 'April' %>
      <% if stock.april_income > 0 %>
        <td><%= stock.ticker %></td>
        <td><%= stock.shares %></td>
        <td><%= stock.account.account_name %></td>
        <td><%= stock.ex_date %></td>
        <td></td>
        <td><%= number_to_currency(stock.april_income, :precision => 2) %></td>
      <% end %>   
      <% when 'May' %>
      <% if stock.may_income > 0 %>
        <td><%= stock.ticker %></td>
        <td><%= stock.shares %></td>
        <td><%= stock.account.account_name %></td>
        <td><%= stock.ex_date %></td>
        <td></td>
        <td><%= number_to_currency(stock.may_income, :precision => 2) %></td>
      <% end %>    
      <% when 'June' %>
      <% if stock.june_income > 0 %>
        <td><%= stock.ticker %></td>
        <td><%= stock.shares %></td>
        <td><%= stock.account.account_name %></td>
        <td><%= stock.ex_date %></td>
        <td></td>
        <td><%= number_to_currency(stock.june_income, :precision => 2) %></td>
      <% end %>
      <% when 'July' %>
      <% if stock.july_income > 0 %>
        <td><%= stock.ticker %></td>
        <td><%= stock.shares %></td>
        <td><%= stock.account.account_name %></td>
        <td><%= stock.ex_date %></td>
        <td></td>
        <td><%= number_to_currency(stock.july_income, :precision => 2) %></td>
      <% end %>
      <% when 'August' %>
      <% if stock.august_income > 0 %>
        <td><%= stock.ticker %></td>
        <td><%= stock.shares %></td>
        <td><%= stock.account.account_name %></td>
        <td><%= stock.ex_date %></td>
        <td></td>
        <td><%= number_to_currency(stock.august_income, :precision => 2) %></td>
      <% end %>
      <% when 'September' %>
      <% if stock.septermber_income > 0 %>
        <td><%= stock.ticker %></td>
        <td><%= stock.shares %></td>
        <td><%= stock.account.account_name %></td>
        <td><%= stock.ex_date %></td>
        <td></td>
        <td><%= number_to_currency(stock.septermber_income, :precision => 2) %></td>
      <% end %>
      <% when 'October' %>
      <% if stock.october_income > 0 %>
        <td><%= stock.ticker %></td>
        <td><%= stock.shares %></td>
        <td><%= stock.account.account_name %></td>
        <td><%= stock.ex_date %></td>
        <td></td>
        <td><%= number_to_currency(stock.october_income, :precision => 2) %></td>
      <% end %>
      <% when 'November' %>
      <% if stock.novemeber_income > 0 %>
        <td><%= stock.ticker %></td>
        <td><%= stock.shares %></td>
        <td><%= stock.account.account_name %></td>
        <td><%= stock.ex_date %></td>
        <td></td>
        <td><%= number_to_currency(stock.novemeber_income, :precision => 2) %></td>
      <% end %>
      <% when 'December' %>
      <% if stock.december_income > 0 %>
        <td><%= stock.ticker %></td>
        <td><%= stock.shares %></td>
        <td><%= stock.account.account_name %></td>
        <td><%= stock.ex_date %></td>
        <td></td>
        <td><%= number_to_currency(stock.december_income, :precision => 2) %></td>
      <% end %>
    <% end %>
    </tr>
    <% end %>
  </tbody>
  </table>
    
  </div>
</div>



